
<!--
  This program and the accompanying materials are
  made available under the terms of the Eclipse Public License v2.0 which accompanies
  this distribution, and is available at https://www.eclipse.org/legal/epl-v20.html

  SPDX-License-Identifier: EPL-2.0

  Copyright Contributors to the Zowe Project.
-->
<div class="workflow-container">
  <div class="workflow-menu">
    <div [ngClass]="{'workflow-menu-item-active': activeMenuItem === 'My Tasks'}"  class="workflow-menu-item" (click)="showMyTasks()" i18n="main menu item|Title of item that shows user tasks@@my-tasks-item">My tasks</div>
    <div [ngClass]="{'workflow-menu-item-active': activeMenuItem === 'Workflows'}" class="workflow-menu-item" (click)="showWorkflows()" i18n="main menu item|Title of item that shows Workflow list@@workflows-item">Workflows</div>
    <div [ngClass]="{'workflow-menu-item-active': activeMenuItem === 'Warnings'}" class="workflow-menu-item" (click)="showWarnings()" i18n="main menu item|Title of item that shows warnings@@warnings-item">Warnings</div>
    <div [ngClass]="{'workflow-menu-item-active': activeMenuItem === 'Configuration'}" class="workflow-menu-item" (click)="showConfiguration()" i18n="main menu item|Title of item that shows Configuration for the app@@configuration-item">Configuration</div>
    <div class="refresh-button-container"><workflow-refresh-button size="24" i18n-title="tooltip|Tooltip of Refresh button@@refresh-tooltip" title="Refresh" (onClick)="refresh()"></workflow-refresh-button></div>
  </div>
  <div class="task-view" [hidden]="activeMenuItem !== 'My Tasks'">
    <div class="task-list">
      <workflow-task-list #workflowtasklist [workflows]="workflows" [userid]="userid"
      (stepSelectedAction)="onStepSelectedAction($event)" [selectedStep]="selectedStep"></workflow-task-list>
    </div>
    <div class="step-container" [hidden]="!hasSelectedStep()">
      <workflow-step-container #workflowstepcontainer (stepChangeRequested)="onStepChangeRequested($event)" [step]="selectedStep"></workflow-step-container>
    </div>
  </div>
  <workflow-list
    #workflowlist
    [hidden]="activeMenuItem !== 'Workflows'"
    [workflows]="workflows"
    (workflowSelected)="onWorkflowSelected($event)"
    (onShowNewWorkflowDialog)="onShowCreateWorkflowForm(true)"
  ></workflow-list>
  <workflow-warnings #warnings [hidden]="activeMenuItem !== 'Warnings'"></workflow-warnings>
  <zosmf-server-config #zosmfserverconfig (configured)="onConfigured($event)" [hidden]="activeMenuItem !== 'Configuration'"></zosmf-server-config>
  <workflow-popup
      i18n-header="dialog header|Header for close dialog@@close-dialog-header"
      header="Unsaved Configuration Changes"
      (onCloseWindow)="cancelCloseDialog()"
      [dark]="true"
      *ngIf="isOnCloseDialogVisible">
      <div class="content-close">Do you want to save your Configuration changes?<br>If you click “Exit”, your current changes will be discarded and the program will close.</div>
      <zlux-popup-window-button-area>
        <zlux-button (click)="saveChanges(); exit();"
          i18n-label="label|Label for Save Changes and Exit button@@save-changes-and-exit-label"
          label="Save & Exit"
          callToAction="true">
        </zlux-button>
        <zlux-button (click)="exit()"
          i18n-label="label|Label for Exit button@@exit-button-label"
          label="Exit">
        </zlux-button>
        <zlux-button (click)="cancelCloseDialog()"
          i18n-label="label|Label of Cancel Dialog button@@cancel-dialog-button-label"
          label="Cancel">
        </zlux-button>
      </zlux-popup-window-button-area>
  </workflow-popup>
  <workflow-popup
      i18n-header="dialog header|Header for unsaved changes dialog@@unsaved-changes-dialog-header"
      header="Unsaved Configuration Changes"
      (onCloseWindow)="cancelUnsavedChangesDialog()"
      [dark]="true"
      *ngIf="isUnsavedChangesDialogVisible">
      <div class="content-unsaved-changes">Do you want to save your Configuration changes?<br>If you click “Don’t Save”, your current changes will be discarded.</div>
      <zlux-popup-window-button-area>
        <zlux-button (click)="saveChanges()"
          i18n-label="label|Label of Save Changes button@@save-changes-button-label"
          label="Save">
        </zlux-button>
        <zlux-button (click)="abandonChanges()"
          i18n-label="label|Label for Abandon Changes button@@abandon-changes-label"
          label="Don't Save"
          callToAction="true">
        </zlux-button>
        <zlux-button (click)="cancelUnsavedChangesDialog()"
          i18n-label="label|Label for Cancel button@@cancel-button-label"
          label="Cancel">
        </zlux-button>
      </zlux-popup-window-button-area>
  </workflow-popup>
</div>
<workflow-create (viewCreateWorkflow)="onShowCreateWorkflowForm($event)"
  (initWorkflowList)="initWorkflowList()"
  [visible]="viewCreateWorkflow">
</workflow-create>
<zosmf-login #zosmflogin on-loggedIn="login()"></zosmf-login>
<workflow-notification></workflow-notification>
<zlux-veil [isEnabled]="globalVeilService.isEnabled()" [enableSpinner]="true"></zlux-veil>
<!--
  This program and the accompanying materials are
  made available under the terms of the Eclipse Public License v2.0 which accompanies
  this distribution, and is available at https://www.eclipse.org/legal/epl-v20.html

  SPDX-License-Identifier: EPL-2.0

  Copyright Contributors to the Zowe Project.
-->
